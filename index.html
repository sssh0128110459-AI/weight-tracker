<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>é«”é‡ç´€éŒ„</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- PWA / iOS æ¨£å¼ç”¨ -->
  <meta name="theme-color" content="#f7f4ec" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="manifest" href="manifest.json" />
  <!-- ä¹‹å¾Œä½ å¯ä»¥è‡ªå·±æ”¾ apple-touch-icon.png -->
  <!-- <link rel="apple-touch-icon" href="icon-192.png" /> -->

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root {
      /* æ·ºè‰²ä¸»é¡Œ */
      --bg-color: #f7f4ec;
      --text-main: #3b3025;
      --card-bg: #ffffff;
      --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      --border-subtle: #d7d1c7;
      --input-bg: #fafafa;
      --accent: #f0c96a;
      --accent-dark: #e7ba4c;
      --danger: #ef7b7b;
      --muted: #5a4d38;
    }

    body.dark-mode {
      /* æ·±è‰²ä¸»é¡Œè¦†å¯« */
      --bg-color: #151515;
      --text-main: #f5f1e6;
      --card-bg: #222222;
      --card-shadow: 0 4px 16px rgba(0, 0, 0, 0.6);
      --border-subtle: #444444;
      --input-bg: #333333;
      --accent: #e7ba4c;
      --accent-dark: #d3a63b;
      --danger: #f07171;
      --muted: #c4b8a3;
    }

    /* ===== Global ===== */
    body {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI",
        Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: var(--bg-color);
      color: var(--text-main);
      overflow-x: hidden;
    }

    #main {
      opacity: 0;
      transition: opacity 1.2s ease;
      max-width: 520px;
      margin: auto;
      padding: 16px 16px 24px;
    }

    /* ===== Header ===== */
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 8px 0 16px;
    }

    h1 {
      font-size: 24px;
      font-weight: 700;
      margin: 0;
    }

    .theme-toggle {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: var(--card-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    /* ===== Card ===== */
    .card {
      background: var(--card-bg);
      border-radius: 18px;
      box-shadow: var(--card-shadow);
      padding: 16px 16px;
      margin-bottom: 16px;
      border: 1px solid rgba(0, 0, 0, 0.03);
    }

    /* ===== Inputs ===== */
    .input-area {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    input {
      padding: 10px 12px;
      font-size: 16px;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: var(--input-bg);
      outline: none;
      color: var(--text-main);
    }

    input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(248, 206, 126, 0.35);
    }

    /* ===== Buttons ===== */
    button {
      padding: 10px 12px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 12px;
      border: none;
      background: var(--accent);
      color: #4a3510;
      cursor: pointer;
      transition: 0.15s;
    }

    button:active {
      transform: scale(0.97);
      background: var(--accent-dark);
    }

    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .btn-secondary {
      background: var(--card-bg);
      color: var(--muted);
      border: 1px solid var(--border-subtle);
    }

    .btn-secondary:active {
      background: var(--input-bg);
    }

    /* ===== Latest Info & Weekly ===== */
    #latest {
      font-weight: 700;
      font-size: 19px;
      white-space: nowrap;
      transform-origin: left;
      display: inline-block;
      max-width: 100%;
    }

    #latest.auto-scale {
      transform: scale(var(--scale));
    }

    #weeklyStats {
      font-size: 13px;
      margin-top: 6px;
      color: var(--muted);
      line-height: 1.5;
      white-space: pre-line;
    }

    /* ===== Chart ===== */
    #chartWrapper {
      border-radius: 18px;
      padding: 10px;
      overflow-x: auto;
      background: var(--card-bg);
      box-shadow: var(--card-shadow);
    }

    #weightChart {
      display: block;
    }

    /* ===== Records ===== */
    #records {
      margin-top: 6px;
    }

    .record {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 10px 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      border: 1px solid rgba(0, 0, 0, 0.02);
    }

    .record-text {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-main);
      white-space: nowrap;
    }

    .record-actions {
      display: flex;
      gap: 4px;
      flex-shrink: 0;
    }

    .edit-btn,
    .delete-btn {
      padding: 3px 6px;
      font-size: 11px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      min-width: 40px;
    }

    .edit-btn {
      background: var(--accent);
      color: #4a3510;
    }

    .delete-btn {
      background: var(--danger);
      color: white;
    }

    /* ===== Modal ===== */
    #modalOverlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.45);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      backdrop-filter: blur(3px);
    }

    #modal {
      width: 90%;
      max-width: 360px;
      background: var(--card-bg);
      border-radius: 20px;
      padding: 18px 18px 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(0, 0, 0, 0.08);
    }

    #modal h2 {
      margin: 0 0 10px;
      text-align: center;
      font-size: 18px;
    }

    .modal-row {
      margin-bottom: 10px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 14px;
    }

    .modal-btns {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .btn-cancel {
      flex: 1;
      background: var(--card-bg);
      color: var(--muted);
      border-radius: 12px;
      padding: 10px;
      border: 1px solid var(--border-subtle);
    }

    .btn-save {
      flex: 1;
      background: var(--accent);
      color: #4a3510;
      border-radius: 12px;
      padding: 10px;
      border: none;
    }

    /* ===== Splash ===== */
    #splash {
      position: fixed;
      inset: 0;
      background: #f2e7c7;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 999999;
      opacity: 1;
      transition: opacity 0.8s ease;
    }

    #splash-logo {
      font-size: 32px;
      font-weight: 700;
      color: #3b3025;
      opacity: 0;
      animation: splashIn 1s forwards;
    }

    @keyframes splashIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ===== Export / Import TextArea å½ˆå‡ºå€ï¼ˆå¯é¸ï¼‰ ===== */
    #exportAreaWrapper {
      margin-top: 10px;
      display: none;
      flex-direction: column;
      gap: 6px;
    }
    #exportArea {
      width: 100%;
      min-height: 80px;
      font-size: 12px;
      padding: 6px 8px;
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      background: var(--input-bg);
      color: var(--text-main);
      resize: vertical;
    }
    .export-tip {
      font-size: 11px;
      color: var(--muted);
    }
  </style>
</head>

<body>
  <!-- Splash -->
  <div id="splash">
    <div id="splash-logo">é«”é‡ç´€éŒ„</div>
  </div>

  <!-- Main -->
  <div id="main">
    <div class="top-bar">
      <h1>é«”é‡ç´€éŒ„</h1>
      <button class="theme-toggle" id="themeToggle" title="åˆ‡æ›ä¸»é¡Œ">
        ğŸŒ™
      </button>
    </div>

    <!-- è¼¸å…¥å€ -->
    <div class="card">
      <div class="input-area">
        <input id="dateInput" type="date" />
        <input
          id="weightInput"
          type="number"
          step="0.1"
          placeholder="é«”é‡ (kg)"
        />
        <input
          id="fatInput"
          type="number"
          step="0.1"
          placeholder="é«”è„‚ (%)ï¼ˆå¯é¸å¡«ï¼‰"
        />
        <button onclick="addRecord()">æ–°å¢ç´€éŒ„</button>
      </div>
    </div>

    <!-- æœ€æ–°ç´€éŒ„ + é€±è®ŠåŒ– -->
    <div class="card">
      <div id="latest"></div>
      <div id="weeklyStats"></div>
    </div>

    <!-- åœ–è¡¨ -->
    <div id="chartWrapper" class="card">
      <canvas id="weightChart"></canvas>
    </div>

    <!-- åŒ¯å‡º / åŒ¯å…¥ -->
    <div class="card">
      <div class="btn-row">
        <button class="btn-secondary" onclick="toggleExportArea()">
          åŒ¯å‡º / åŒ¯å…¥è³‡æ–™
        </button>
        <button class="btn-secondary" onclick="clearAll()">
          æ¸…é™¤å…¨éƒ¨
        </button>
      </div>
      <div id="exportAreaWrapper">
        <textarea id="exportArea" readonly></textarea>
        <div class="btn-row">
          <button class="btn-secondary" onclick="copyExport()">
            è¤‡è£½åŒ¯å‡ºå…§å®¹
          </button>
          <button class="btn-secondary" onclick="importFromText()">
            åŒ¯å…¥è²¼ä¸Šçš„è³‡æ–™
          </button>
        </div>
        <div class="export-tip">
          åŒ¯å‡ºï¼šæŒ‰ã€Œè¤‡è£½åŒ¯å‡ºå…§å®¹ã€ï¼Œè²¼åˆ°é›²ç«¯è¨˜äº‹ / Line è‡ªå·±ã€‚<br />
          åŒ¯å…¥ï¼šåœ¨ä¸Šæ–¹è²¼ä¸Š JSONï¼Œå†æŒ‰ã€ŒåŒ¯å…¥è²¼ä¸Šçš„è³‡æ–™ã€ã€‚<br />
          â€» æ¯å°è£ç½®è³‡æ–™æ˜¯ç¨ç«‹çš„ï¼ŒåŒ¯å…¥æœƒè¦†è“‹ç›®å‰è³‡æ–™ã€‚
        </div>
      </div>
    </div>

    <!-- ç´€éŒ„åˆ—è¡¨ -->
    <div id="records"></div>
  </div>

  <!-- Modal ç·¨è¼¯ -->
  <div id="modalOverlay">
    <div id="modal">
      <h2>ç·¨è¼¯ç´€éŒ„</h2>

      <div class="modal-row">
        <label>æ—¥æœŸï¼š</label>
        <input id="editDate" type="date" />
      </div>
      <div class="modal-row">
        <label>é«”é‡ (kg)ï¼š</label>
        <input id="editWeight" type="number" step="0.1" />
      </div>
      <div class="modal-row">
        <label>é«”è„‚ (%)ï¼š</label>
        <input id="editFat" type="number" step="0.1" />
      </div>

      <div class="modal-btns">
        <button class="btn-cancel" onclick="closeModal()">å–æ¶ˆ</button>
        <button class="btn-save" onclick="saveEdit()">å„²å­˜</button>
      </div>
    </div>
  </div>

  <script>
    const STORAGE_KEY = "weight_logs";
    const THEME_KEY = "weight_theme";
    let editIndex = null;
    let chart = null;

    // ===== å·¥å…·å‡½å¼ =====
    function getLogs() {
      return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
    }
    function saveLogs(logs) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(logs));
    }

    // ===== Splash + ä¸»ç•«é¢æ·¡å…¥ =====
    window.addEventListener("load", () => {
      initTheme();
      setDefaultDate();

      const splash = document.getElementById("splash");
      const main = document.getElementById("main");

      setTimeout(() => {
        main.style.opacity = 1;
        splash.style.opacity = 0;
        setTimeout(() => {
          splash.style.display = "none";
        }, 900);
      }, 1200);

      render();
    });

    // ===== ä¸»é¡Œåˆ‡æ›ï¼ˆæ·ºè‰² / æ·±è‰²ï¼‰ =====
    function initTheme() {
      const saved = localStorage.getItem(THEME_KEY);
      if (saved === "dark") {
        document.body.classList.add("dark-mode");
        document.getElementById("themeToggle").innerText = "â˜€ï¸";
      } else {
        document.body.classList.remove("dark-mode");
        document.getElementById("themeToggle").innerText = "ğŸŒ™";
      }
    }

    document.getElementById("themeToggle").addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
      const isDark = document.body.classList.contains("dark-mode");
      localStorage.setItem(THEME_KEY, isDark ? "dark" : "light");
      document.getElementById("themeToggle").innerText = isDark ? "â˜€ï¸" : "ğŸŒ™";
    });

    // ===== æ—¥æœŸé è¨­ä»Šå¤© =====
    function setDefaultDate() {
      const d = document.getElementById("dateInput");
      if (!d.value) d.value = new Date().toISOString().slice(0, 10);
    }

    // ===== æ–°å¢ç´€éŒ„ =====
    function addRecord() {
      const dateInput = document.getElementById("dateInput");
      const weightInput = document.getElementById("weightInput");
      const fatInput = document.getElementById("fatInput");

      const date = dateInput.value || new Date().toISOString().slice(0, 10);
      const weight = weightInput.value;
      const fat = fatInput.value;

      if (!weight) {
        alert("è«‹è¼¸å…¥é«”é‡ï¼");
        return;
      }

      const logs = getLogs();
      logs.push({ date, weight, fat });
      saveLogs(logs);

      weightInput.value = "";
      fatInput.value = "";
      render();
    }

    // ===== æœ€æ–°ç´€éŒ„è‡ªå‹•ç¸®æ”¾ =====
    function autoScaleLatest() {
      const el = document.getElementById("latest");
      if (!el.textContent) return;

      el.style.setProperty("--scale", 1);
      el.classList.add("auto-scale");

      const parentWidth = el.parentElement.clientWidth;
      const scale = parentWidth / el.scrollWidth;
      const finalScale = Math.min(scale, 1);
      el.style.setProperty("--scale", finalScale);
    }

    // ===== é¡¯ç¤ºæœ€æ–°ç´€éŒ„ =====
    function showLatest() {
      const logs = getLogs();
      const latestDiv = document.getElementById("latest");

      if (!logs.length) {
        latestDiv.textContent = "å°šç„¡ç´€éŒ„";
        autoScaleLatest();
        return;
      }

      const sorted = logs.slice().sort((a, b) => b.date.localeCompare(a.date));
      const last = sorted[0];
      let text = `${last.date}ï¼š${last.weight} kg`;
      if (last.fat) text += `ï¼Œé«”è„‚ ${last.fat}%`;

      latestDiv.textContent = text;
      autoScaleLatest();
    }

    // ===== é€±è®ŠåŒ– =====
    function showWeeklyStats() {
      const logs = getLogs();
      const box = document.getElementById("weeklyStats");
      if (!logs.length) {
        box.textContent = "";
        return;
      }

      const dates = logs.map((l) => l.date).filter(Boolean).sort();
      const latestDateStr = dates[dates.length - 1];
      const latestDate = new Date(latestDateStr);

      function dayDiff(a, b) {
        return Math.floor((a - b) / (1000 * 60 * 60 * 24));
      }

      const curW = [];
      const prevW = [];
      const curF = [];
      const prevF = [];

      logs.forEach((l) => {
        if (!l.date) return;
        const d = new Date(l.date);
        const diff = dayDiff(latestDate, d);
        const w = parseFloat(l.weight);
        const f = l.fat ? parseFloat(l.fat) : NaN;

        if (diff >= 0 && diff <= 6) {
          if (!isNaN(w)) curW.push(w);
          if (!isNaN(f)) curF.push(f);
        } else if (diff >= 7 && diff <= 13) {
          if (!isNaN(w)) prevW.push(w);
          if (!isNaN(f)) prevF.push(f);
        }
      });

      function avg(arr) {
        if (!arr.length) return null;
        return arr.reduce((a, b) => a + b, 0) / arr.length;
      }

      const curWA = avg(curW);
      const prevWA = avg(prevW);
      const curFA = avg(curF);
      const prevFA = avg(prevF);

      let lines = [];
      if (curWA !== null) {
        let line = `æœ€è¿‘ 7 å¤©å¹³å‡é«”é‡ï¼šç´„ ${curWA.toFixed(1)} kg`;
        if (prevWA !== null) {
          const diff = curWA - prevWA;
          const sign = diff > 0 ? "+" : "";
          line += `ï¼ˆè¼ƒå‰ 7 å¤© ${sign}${diff.toFixed(1)} kgï¼‰`;
        }
        lines.push(line);
      }
      if (curFA !== null) {
        let line = `æœ€è¿‘ 7 å¤©å¹³å‡é«”è„‚ï¼šç´„ ${curFA.toFixed(1)} %`;
        if (prevFA !== null) {
          const diff = curFA - prevFA;
          const sign = diff > 0 ? "+" : "";
          line += `ï¼ˆè¼ƒå‰ 7 å¤© ${sign}${diff.toFixed(1)} %ï¼‰`;
        }
        lines.push(line);
      }

      box.textContent = lines.join("\n");
    }

    // ===== åœ–è¡¨ =====
    function renderChart() {
      const logs = getLogs();
      if (!logs.length) {
        if (chart) {
          chart.destroy();
          chart = null;
        }
        return;
      }

      const byDate = {};
      logs.forEach((l) => {
        if (!l.date) return;
        if (!byDate[l.date]) byDate[l.date] = { w: [], f: [] };
        const w = parseFloat(l.weight);
        if (!isNaN(w)) byDate[l.date].w.push(w);
        if (l.fat) {
          const f = parseFloat(l.fat);
          if (!isNaN(f)) byDate[l.date].f.push(f);
        }
      });

      const dates = Object.keys(byDate).sort();
      if (!dates.length) return;

      const weights = dates.map(
        (d) =>
          byDate[d].w.reduce((a, b) => a + b, 0) / byDate[d].w.length
      );
      const fats = dates.map((d) =>
        byDate[d].f.length
          ? byDate[d].f.reduce((a, b) => a + b, 0) / byDate[d].f.length
          : null
      );

      const canvas = document.getElementById("weightChart");
      canvas.width = Math.max(320, dates.length * 70);
      canvas.height = 240;

      const ctx = canvas.getContext("2d");
      if (chart) chart.destroy();

      chart = new Chart(ctx, {
        type: "line",
        data: {
          labels: dates,
          datasets: [
            {
              label: "é«”é‡ (kg)",
              data: weights,
              borderWidth: 2,
              tension: 0.25,
              pointRadius: 4,
            },
            {
              label: "é«”è„‚ (%)",
              data: fats,
              borderWidth: 2,
              tension: 0.25,
              pointRadius: 4,
              borderColor: "#f3c23a",
              backgroundColor: "rgba(243,194,58,0.2)",
            },
          ],
        },
        options: {
          responsive: false,
          maintainAspectRatio: false,
          spanGaps: true,
        },
      });
    }

    // ===== ç´€éŒ„åˆ—è¡¨ =====
    function renderRecords() {
      const logs = getLogs();
      const box = document.getElementById("records");
      box.innerHTML = "";

      if (!logs.length) {
        const empty = document.createElement("div");
        empty.className = "card";
        empty.textContent = "ç›®å‰å°šç„¡ç´€éŒ„ï¼Œè«‹å…ˆæ–°å¢ä¸€ç­†ã€‚";
        box.appendChild(empty);
        return;
      }

      const sorted = logs.slice().sort((a, b) => b.date.localeCompare(a.date));

      sorted.forEach((l) => {
        const all = getLogs(); // é‡æ–°æŠ“ï¼Œé¿å…å¼•ç”¨å•é¡Œ
        const idx = all.indexOf(l);

        const div = document.createElement("div");
        div.className = "record";

        const t = document.createElement("div");
        t.className = "record-text";
        t.textContent = `${l.date}  |  ${l.weight} kg ${
          l.fat ? `| é«”è„‚ ${l.fat}%` : ""
        }`;

        const actions = document.createElement("div");
        actions.className = "record-actions";

        const eBtn = document.createElement("button");
        eBtn.className = "edit-btn";
        eBtn.textContent = "ç·¨è¼¯";
        eBtn.onclick = () => openModal(idx);

        const dBtn = document.createElement("button");
        dBtn.className = "delete-btn";
        dBtn.textContent = "åˆªé™¤";
        dBtn.onclick = () => deleteRecord(idx);

        actions.appendChild(eBtn);
        actions.appendChild(dBtn);

        div.appendChild(t);
        div.appendChild(actions);
        box.appendChild(div);
      });
    }

    // ===== Modal ç·¨è¼¯ =====
    function openModal(index) {
      editIndex = index;
      const logs = getLogs();
      const l = logs[index];
      document.getElementById("editDate").value = l.date;
      document.getElementById("editWeight").value = l.weight;
      document.getElementById("editFat").value = l.fat || "";
      document.getElementById("modalOverlay").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("modalOverlay").style.display = "none";
    }

    function saveEdit() {
      const logs = getLogs();
      const l = logs[editIndex];
      l.date = document.getElementById("editDate").value;
      l.weight = document.getElementById("editWeight").value;
      l.fat = document.getElementById("editFat").value;
      if (!l.weight) {
        alert("é«”é‡ä¸å¯ç‚ºç©ºï¼");
        return;
      }
      saveLogs(logs);
      closeModal();
      render();
    }

    function deleteRecord(index) {
      if (!confirm("ç¢ºå®šè¦åˆªé™¤é€™ç­†ç´€éŒ„å—ï¼Ÿ")) return;
      const logs = getLogs();
      logs.splice(index, 1);
      saveLogs(logs);
      render();
    }

    // ===== åŒ¯å‡º / åŒ¯å…¥ / æ¸…é™¤ =====
    function toggleExportArea() {
      const wrapper = document.getElementById("exportAreaWrapper");
      const area = document.getElementById("exportArea");
      if (wrapper.style.display === "flex") {
        wrapper.style.display = "none";
      } else {
        wrapper.style.display = "flex";
        const logs = getLogs();
        area.value = JSON.stringify(logs, null, 2);
      }
    }

    function copyExport() {
      const area = document.getElementById("exportArea");
      area.select();
      document.execCommand("copy");
      alert("å·²è¤‡è£½ï¼Œè²¼åˆ°é›²ç«¯è¨˜äº‹æˆ–å‚³çµ¦è‡ªå·±å°±ç®—ã€é›²ç«¯å‚™ä»½ã€äº†ï¼");
    }

    function importFromText() {
      const area = document.getElementById("exportArea");
      const text = area.value.trim();
      if (!text) {
        alert("è«‹å…ˆåœ¨ä¸Šæ–¹è²¼ä¸ŠåŒ¯å‡ºå…§å®¹ï¼");
        return;
      }
      try {
        const data = JSON.parse(text);
        if (!Array.isArray(data)) throw new Error("æ ¼å¼éŒ¯èª¤");
        saveLogs(data);
        alert("åŒ¯å…¥æˆåŠŸï¼Œå·²è¦†è“‹ç›®å‰è³‡æ–™ã€‚");
        render();
      } catch (e) {
        alert("åŒ¯å…¥å¤±æ•—ï¼šæ ¼å¼ä¸æ˜¯æœ‰æ•ˆçš„ JSONã€‚");
      }
    }

    function clearAll() {
      if (
        !confirm("ç¢ºå®šè¦æ¸…é™¤å…¨éƒ¨ç´€éŒ„å—ï¼Ÿé€™å€‹å‹•ä½œç„¡æ³•å¾©åŸã€‚")
      )
        return;
      saveLogs([]);
      render();
    }

    // ===== æ•´é«”æ¸²æŸ“ =====
    function render() {
      renderRecords();
      renderChart();
      showLatest();
      showWeeklyStats();
    }
  </script>
</body>
</html>
